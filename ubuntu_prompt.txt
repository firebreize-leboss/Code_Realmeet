Ajoute un syst√®me de validation manuelle au check-in staff de RealMeet. Ce syst√®me permet au staff de valider manuellement des participants quand la cam√©ra ou le QR ne fonctionne pas. Voici les 2 fichiers √† modifier :

=== FICHIER 1 : realmeet-checkin/routes/checkin.js ===

Ajoute une nouvelle route POST /api/checkin/manual-validate, prot√©g√©e par partnerAuth et validateLimiter. Elle re√ßoit { slot_participant_id } dans le body. La route doit :
1. V√©rifier que slot_participant_id est fourni (sinon 400)
2. R√©cup√©rer le participant avec supabase.from('slot_participants').select('id, checked_in_at, slot_id, activity_id, activities!inner(host_id), profiles!slot_participants_user_id_fkey(full_name)').eq('id', slot_participant_id).single()
3. V√©rifier que le participant existe (sinon 404)
4. V√©rifier que activities.host_id === req.partner.id (sinon 403 "Non autoris√©")
5. V√©rifier que checked_in_at est null (sinon 409 "D√©j√† enregistr√©")
6. Faire le update : supabase.from('slot_participants').update({ checked_in_at: new Date().toISOString(), checked_in_by: req.partner.id, checkin_nonce: null }).eq('id', slot_participant_id).is('checked_in_at', null).select('id, checked_in_at').single()
7. Si erreur ou pas de r√©sultat, retourner 409 race condition
8. Logger avec logCheckin(sp.id, sp.slot_id, sp.activity_id, 'manual_validate', 'success', req.partner.id, req.ip, req.headers['user-agent'] || '')
9. Retourner { success: true, message: `${sp.profiles.full_name} enregistr√©(e) manuellement`, checked_in_at: updated.checked_in_at }
10. Wrapper le tout dans try/catch, en cas d'erreur console.error et retourner 500

Place cette route juste apr√®s la route /validate existante.

=== FICHIER 2 : realmeet-checkin/public/staff/index.html ===

RAPPEL IMPORTANT : AUCUN onclick="" inline dans le HTML, UNIQUEMENT des addEventListener en JS. C'est √† cause du CSP Helmet qui bloque les handlers inline.

--- HTML √† ajouter ---

1. Apr√®s la div .scanner-label ("Scannez le QR code du participant"), ajoute un bouton :
<button class="btn-manual" id="btn-manual" style="display:none">üë• Validation manuelle</button>

2. Apr√®s la div #result-overlay, ajoute un nouvel overlay pour la liste manuelle :
<div class="manual-overlay" id="manual-overlay">
  <div class="manual-card" id="manual-card">
    <div class="manual-header">
      <h3 class="manual-title">Validation manuelle</h3>
      <button class="manual-close" id="btn-manual-close">‚úï</button>
    </div>
    <div class="manual-list" id="manual-list">
      <div class="loading"><div class="spinner"></div></div>
    </div>
  </div>
</div>

--- CSS √† ajouter (dans le bloc <style> existant) ---

.btn-manual {
  display:block; width:calc(100% - 40px); max-width:400px; margin:16px auto 0;
  padding:14px; border-radius:12px; border:1px solid var(--violet);
  background:rgba(129,140,248,0.1); color:var(--violet);
  font-size:15px; font-weight:600; cursor:pointer; font-family:inherit;
  transition:all .2s;
}
.btn-manual:hover { background:rgba(129,140,248,0.2); }

.manual-overlay {
  position:fixed; inset:0; background:rgba(0,0,0,0.85);
  display:none; align-items:center; justify-content:center;
  z-index:200; padding:20px; backdrop-filter:blur(8px);
}
.manual-overlay.show { display:flex; }
.manual-card {
  background:var(--card); border-radius:20px;
  width:100%; max-width:420px; max-height:80vh;
  border:1px solid var(--border); animation:slideUp .3s ease;
  display:flex; flex-direction:column; overflow:hidden;
}
.manual-header {
  display:flex; justify-content:space-between; align-items:center;
  padding:20px 24px; border-bottom:1px solid var(--border);
}
.manual-title { font-size:18px; font-weight:700; }
.manual-close {
  background:none; border:none; color:var(--muted);
  font-size:20px; cursor:pointer; padding:4px 8px;
}
.manual-list {
  overflow-y:auto; padding:12px; flex:1;
}
.manual-participant {
  display:flex; align-items:center; padding:12px;
  border-radius:12px; margin-bottom:8px; background:var(--bg);
  gap:12px;
}
.manual-avatar {
  width:44px; height:44px; border-radius:50%; object-fit:cover;
  border:2px solid var(--border); flex-shrink:0;
}
.manual-avatar-placeholder {
  width:44px; height:44px; border-radius:50%; background:var(--border);
  display:flex; align-items:center; justify-content:center;
  font-size:18px; flex-shrink:0;
}
.manual-name { flex:1; font-size:14px; font-weight:600; }
.manual-btn-validate {
  padding:8px 16px; border-radius:8px; border:none;
  background:var(--violet); color:white; font-size:13px;
  font-weight:600; cursor:pointer; font-family:inherit;
  transition:all .2s;
}
.manual-btn-validate:disabled { opacity:0.5; cursor:not-allowed; }
.manual-checked {
  color:var(--green); font-size:13px; font-weight:600;
  display:flex; align-items:center; gap:4px;
}

--- JavaScript √† ajouter (dans le bloc <script> existant) ---

Ajoute ces fonctions et event listeners :

1. Fonction openManualValidation() :
- Met scannerPaused = true
- Affiche le manual-overlay en ajoutant la classe 'show'
- Fait un fetch GET /api/checkin/slot-status/${selectedSlotId} avec credentials:'include'
- Parse le JSON et r√©cup√®re data.participants
- G√©n√®re le HTML de la liste dans manual-list : pour chaque participant, un div.manual-participant contenant l'avatar (img ou placeholder), le nom, et soit un span.manual-checked "‚úÖ Enregistr√©" si checkedIn est true, soit un button.manual-btn-validate avec data-id="${p.id}" et texte "Valider"
- IMPORTANT : apr√®s avoir inject√© le innerHTML, attache les addEventListener sur chaque .manual-btn-validate en bouclant avec querySelectorAll et pour chaque bouton, au click appeler manualValidate(btn.dataset.id, btn)
- En cas d'erreur fetch, afficher un message d'erreur dans manual-list

2. Fonction manualValidate(participantId, btn) :
- D√©sactive le bouton, change son texte en "..."
- Fait un fetch POST /api/checkin/manual-validate avec body { slot_participant_id: participantId } et credentials:'include' et header Content-Type application/json
- Si resp.ok et data.success :
  - Remplace le bouton par un span.manual-checked "‚úÖ Enregistr√©"
  - Met √† jour les compteurs : slotStats.checkedIn++, met √† jour count-done, count-remaining, et le chip du slot s√©lectionn√©
- Sinon : r√©active le bouton, affiche data.error en alert ou remet le texte "Erreur"

3. Fonction closeManualOverlay() :
- Retire la classe 'show' du manual-overlay
- Remet scannerPaused = false

4. Event listeners √† ajouter (apr√®s le addEventListener du btn-logout existant) :
- document.getElementById('btn-manual').addEventListener('click', openManualValidation)
- document.getElementById('btn-manual-close').addEventListener('click', closeManualOverlay)

5. Dans la fonction selectSlot existante, apr√®s la ligne document.getElementById('scanner-section').style.display = 'block', ajoute :
document.getElementById('btn-manual').style.display = 'block'

Cela fait appara√Ætre le bouton "Validation manuelle" d√®s qu'un cr√©neau est s√©lectionn√©.