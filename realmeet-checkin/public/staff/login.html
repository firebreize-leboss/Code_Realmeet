<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
  <title>RealMeet Staff — Connexion</title>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family:'Manrope',sans-serif; background:#0a0a1a;
      color:#fff; min-height:100vh; display:flex;
      align-items:center; justify-content:center; padding:20px;
    }
    .login-card {
      background:linear-gradient(135deg,#1a1a2e 0%,#16213e 100%);
      border-radius:20px; padding:40px 32px; width:100%; max-width:380px;
      border:1px solid rgba(99,102,241,0.2);
    }
    .logo { text-align:center; margin-bottom:32px; }
    .logo h1 { font-size:24px; background:linear-gradient(135deg,#60A5FA,#818CF8,#C084FC);
      -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
    .logo p { color:#64748b; font-size:13px; margin-top:4px; }
    .field { margin-bottom:16px; }
    .field label { display:block; font-size:12px; color:#94a3b8; margin-bottom:6px; font-weight:600; }
    .field input {
      width:100%; padding:14px 16px; background:#0f172a; border:1px solid #334155;
      border-radius:12px; color:#fff; font-size:15px; font-family:inherit;
      transition:border-color .2s;
    }
    .field input:focus { outline:none; border-color:#818CF8; }
    .btn-login {
      width:100%; padding:16px; border:none; border-radius:12px;
      background:linear-gradient(135deg,#60A5FA,#818CF8,#C084FC);
      color:#fff; font-size:16px; font-weight:700; cursor:pointer;
      font-family:inherit; margin-top:8px; transition:opacity .2s;
    }
    .btn-login:hover { opacity:0.9; }
    .btn-login:disabled { opacity:0.5; cursor:not-allowed; }
    .error { color:#fca5a5; font-size:13px; text-align:center; margin-top:12px; display:none; }
  </style>
</head>
<body>
  <div class="login-card">
    <div class="logo">
      <h1>RealMeet</h1>
      <p>Espace partenaire — Check-in</p>
    </div>
    <div class="field">
      <label>EMAIL</label>
      <input type="email" id="email" placeholder="votre@email.com" autocomplete="email">
    </div>
    <div class="field">
      <label>MOT DE PASSE</label>
      <input type="password" id="password" placeholder="••••••••" autocomplete="current-password">
    </div>
    <button class="btn-login" id="btn-login">Se connecter</button>
    <div class="error" id="error"></div>
  </div>
  <script>
    async function login() {
      const btn = document.getElementById('btn-login');
      const err = document.getElementById('error');
      btn.disabled = true; btn.textContent = 'Connexion...'; err.style.display = 'none';
      try {
        const resp = await fetch('/api/auth/login', {
          method:'POST', credentials:'include',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify({
            email: document.getElementById('email').value,
            password: document.getElementById('password').value
          })
        });
        const data = await resp.json();
        if (!resp.ok) throw new Error(data.error);
        window.location.href = '/staff';
      } catch(e) {
        err.textContent = e.message; err.style.display = 'block';
        btn.disabled = false; btn.textContent = 'Se connecter';
      }
    }
    document.getElementById('btn-login').addEventListener('click', function(e) {
      e.preventDefault();
      login();
    });
    document.getElementById('password').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') login();
    });
</script>
</body>
</html>